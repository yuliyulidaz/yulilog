<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î∞úÏ∑å Î¨∏Íµ¨ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±Í∏∞</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600;700&family=Noto+Sans+KR:wght@400;500;700&family=Nanum+Myeongjo:wght@400;700&family=Nanum+Gothic:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #F8F9FA;
            --text-primary: #1a1a1a;
            --text-secondary: #6b7280;
            --accent: #6366F1;
            --accent-hover: #4f46e5;
            --border: #e5e7eb;
            --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            --card-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        body.dark {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            --border: #404040;
            --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            --card-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            transition: background 0.3s, color 0.3s;
        }
        
        .header {
            background: var(--bg-primary);
            padding: 20px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background 0.3s;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .dark-mode-toggle {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
        }
        
        .dark-mode-toggle:hover {
            transform: scale(1.05);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        @media (min-width: 900px) {
            .layout {
                grid-template-columns: 400px 1fr;
                align-items: start;
            }
            
            .preview-container {
                position: sticky;
                top: 90px;
                align-self: start;
            }
        }
        
        .card {
            background: var(--bg-primary);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .card-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            transition: background 0.2s;
        }
        
        .card-header:hover {
            background: var(--bg-secondary);
        }
        
        .card-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .card-icon {
            font-size: 1.2em;
            transition: transform 0.3s;
        }
        
        .card-content {
            padding: 20px;
            display: none;
        }
        
        .card-content.active {
            display: block;
        }
        
        .card.collapsed .card-icon {
            transform: rotate(-90deg);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        
        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s;
        }
        
        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
            line-height: 1.6;
        }
        
        .color-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 12px;
        }
        
        .color-option {
            aspect-ratio: 1;
            border-radius: 12px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
            position: relative;
        }
        
        .color-option:hover {
            transform: scale(1.05);
            box-shadow: var(--card-shadow-hover);
        }
        
        .color-option.active {
            border-color: var(--accent);
            transform: scale(1.05);
        }
        
        .color-option.active::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.8em;
            font-weight: bold;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .color-picker-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .color-picker-row input[type="color"] {
            width: 60px;
            height: 44px;
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            background: none;
        }
        
        .color-picker-row span {
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        
        .radio-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 8px;
        }
        
        .radio-group.four-col {
            grid-template-columns: repeat(4, 1fr);
        }
        
        .radio-option input[type="radio"] {
            display: none;
        }
        
        .radio-option label {
            display: block;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            background: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .radio-option label:hover {
            border-color: var(--accent);
        }
        
        .radio-option input[type="radio"]:checked + label {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        .form-range {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            outline: none;
            cursor: pointer;
        }
        
        .form-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .form-range::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        
        .form-range::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        .range-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .range-value {
            font-weight: 600;
            color: var(--accent);
        }
        
        #canvas {
            width: 100%;
            height: auto;
            border-radius: 12px;
            display: block;
            box-shadow: var(--card-shadow-hover);
        }
        
        .btn-primary {
            width: 100%;
            padding: 16px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .mobile-actions {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-primary);
            border-top: 1px solid var(--border);
            padding: 12px 20px;
            z-index: 99;
        }
        
        @media (max-width: 899px) {
            .mobile-actions {
                display: block;
            }
            
            .preview-container .btn-primary {
                display: none;
            }
            
            .container {
                padding-bottom: 80px;
            }
        }
        
        .divider {
            height: 1px;
            background: var(--border);
            margin: 20px 0;
        }
        
        @media (max-width: 899px) {
            .logo {
                font-size: 1.2em;
            }
            
            .color-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">üìñ Î∞úÏ∑å Î¨∏Íµ¨ ÏÉùÏÑ±Í∏∞</div>
            <button class="dark-mode-toggle" onclick="toggleDarkMode()">üåô</button>
        </div>
    </div>
    
    <div class="container">
        <div class="layout">
            <div class="controls">
                <!-- ÌÖçÏä§Ìä∏ ÏÑ§Ï†ï -->
                <div class="card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <div class="card-title">‚úèÔ∏è ÌÖçÏä§Ìä∏ ÏÑ§Ï†ï</div>
                        <div class="card-icon">‚ñº</div>
                    </div>
                    <div class="card-content active">
                        <div class="form-group">
                            <label class="form-label">Î∞úÏ∑å Î¨∏Íµ¨</label>
                            <textarea class="form-textarea" id="quote" placeholder="ÎßàÏùåÏóê ÎìúÎäî Î¨∏Íµ¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...">Ï†ú Ïó∞Ïù∏ÏùÄ Ïï°Ï†ï ÏÜçÏóê ÏÇ¥Í≥† ÏûàÎÑ§Ïöî.</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Ï†úÏûëÏûê</label>
                            <input type="text" class="form-input" id="author" placeholder="Ï†úÏûëÏûê" value="Ï†úÏûëÏûê">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Ï∫êÎ¶≠ÌÑ∞</label>
                            <input type="text" class="form-input" id="title" placeholder="Ï∫êÎ¶≠ÌÑ∞" value="Ï∫êÎ¶≠ÌÑ∞">
                        </div>
                    </div>
                </div>
                
                <!-- Ïä§ÌÉÄÏùº ÏÑ§Ï†ï -->
                <div class="card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <div class="card-title">üìê Ïä§ÌÉÄÏùº ÏÑ§Ï†ï</div>
                        <div class="card-icon">‚ñº</div>
                    </div>
                    <div class="card-content active">
                        <div class="form-group">
                            <label class="form-label">Ï∫îÎ≤ÑÏä§ ÎπÑÏú®</label>
                            <select class="form-select" id="canvasRatio">
                                <option value="1:1">Ï†ïÏÇ¨Í∞ÅÌòï (1:1) - 1080x1080</option>
                                <option value="4:5">ÏÑ∏Î°úÌòï (4:5) - 1080x1350</option>
                                <option value="16:9">Í∞ÄÎ°úÌòï (16:9) - 1920x1080</option>
                                <option value="9:16">Ïä§ÌÜ†Î¶¨ (9:16) - 1080x1920</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Ìè∞Ìä∏ ÏÑ†ÌÉù</label>
                            <select class="form-select" id="fontSelect">
                                <option value="Noto Serif KR">Î≥∏Î¨∏Î™ÖÏ°∞ (Noto Serif KR)</option>
                                <option value="Nanum Myeongjo">ÎÇòÎàîÎ™ÖÏ°∞</option>
                                <option value="Noto Sans KR">Í≥†ÎîïÏ≤¥ (Noto Sans KR)</option>
                                <option value="Nanum Gothic">ÎÇòÎàîÍ≥†Îîï</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ÌÖçÏä§Ìä∏ Ï†ïÎ†¨</label>
                            <div class="radio-group four-col">
                                <div class="radio-option">
                                    <input type="radio" name="align" id="align-justify" value="justify" checked>
                                    <label for="align-justify">ÏñëÏ™Ω</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="align" id="align-left" value="left">
                                    <label for="align-left">ÏôºÏ™Ω</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="align" id="align-center" value="center">
                                    <label for="align-center">Í∞ÄÏö¥Îç∞</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="align" id="align-right" value="right">
                                    <label for="align-right">Ïò§Î•∏Ï™Ω</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Ï§ÑÎ∞îÍøà Î∞©Ïãù</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="linebreak" id="linebreak-char" value="char" checked>
                                    <label for="linebreak-char">Í∏ÄÏûê Îã®ÏúÑ</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="linebreak" id="linebreak-word" value="word">
                                    <label for="linebreak-word">Îã®Ïñ¥ Îã®ÏúÑ</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <div class="range-label">
                                <label class="form-label" style="margin: 0;">Í∏ÄÏûê ÌÅ¨Í∏∞</label>
                                <span class="range-value"><span id="fontSizeValue">52</span>px</span>
                            </div>
                            <input type="range" class="form-range" id="fontSize" min="30" max="80" value="52">
                        </div>
                        
                        <div class="form-group">
                            <div class="range-label">
                                <label class="form-label" style="margin: 0;">Ï§Ñ Í∞ÑÍ≤©</label>
                                <span class="range-value"><span id="lineHeightValue">1.5</span>Î∞∞</span>
                            </div>
                            <input type="range" class="form-range" id="lineHeight" min="1.2" max="2.0" step="0.1" value="1.5">
                        </div>
                        
                        <div class="form-group">
                            <div class="range-label">
                                <label class="form-label" style="margin: 0;">Ïó¨Î∞±</label>
                                <span class="range-value"><span id="paddingValue">100</span>px</span>
                            </div>
                            <input type="range" class="form-range" id="padding" min="50" max="200" step="10" value="100">
                        </div>
                    </div>
                </div>
                
                <!-- ÏÉâÏÉÅ ÏÑ§Ï†ï -->
                <div class="card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <div class="card-title">üé® ÏÉâÏÉÅ ÏÑ§Ï†ï</div>
                        <div class="card-icon">‚ñº</div>
                    </div>
                    <div class="card-content active">
                        <div class="form-group">
                            <label class="form-label">Í∏ÄÏûê ÏÉâÏÉÅ</label>
                            <div class="color-picker-row">
                                <input type="color" id="textColor" value="#ffffff">
                                <span id="textColorValue">#ffffff</span>
                            </div>
                        </div>
                        
                        <div class="divider"></div>
                        
                        <div class="form-group">
                            <label class="form-label">Ïª§Ïä§ÌÖÄ Î∞∞Í≤Ω</label>
                            <div class="color-picker-row">
                                <input type="color" id="solidColor" value="#9B7E6B">
                                <span>Îã®ÏÉâ</span>
                            </div>
                            <div class="color-picker-row">
                                <input type="color" id="gradientColor1" value="#9B7E6B">
                                <input type="color" id="gradientColor2" value="#E6DDD3">
                                <span>Í∑∏ÎùºÎç∞Ïù¥ÏÖò</span>
                            </div>
                        </div>
                        
                        <div class="divider"></div>
                        
                        <div class="form-group">
                            <label class="form-label">ÏÉâÏÉÅ ÌåîÎ†àÌä∏</label>
                            <div class="color-grid" id="colorGrid"></div>
                        </div>
                    </div>
                </div>
                
                <!-- ÌîåÎû´Ìèº ÏÑ†ÌÉù -->
                <div class="card">
                    <div class="card-header" onclick="toggleCard(this)">
                        <div class="card-title">üì± ÌîåÎû´Ìèº ÏÑ†ÌÉù</div>
                        <div class="card-icon">‚ñº</div>
                    </div>
                    <div class="card-content active">
                        <div class="form-group">
                            <label class="form-label">ÌîåÎû´Ìèº</label>
                            <select class="form-select" id="platformSelect">
                                <option value="">Î°úÍ≥† ÏóÜÏùå</option>
                                <option value="bloom">Î∏îÎ£∏</option>
                                <option value="carat">Ï∫êÎüø</option>
                                <option value="caveDuck">ÏºÄÏù¥Î∏åÎçï</option>
                                <option value="dokiChat">ÎèÑÌÇ§Ï±ó</option>
                                <option value="inkChat">ÏûâÌÅ¨Ï±ó</option>
                                <option value="zeta">Ï†úÌÉÄ</option>
                                <option value="luvDuv">Îü¨ÎπÑÎçîÎπÑ</option>
                                <option value="melting">Î©úÌåÖ</option>
                                <option value="pulse">ÌéÑÏä§</option>
                                <option value="ropanAI">Î°úÌåêAI</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <div class="range-label">
                                <label class="form-label" style="margin: 0;">Î°úÍ≥† ÌÅ¨Í∏∞</label>
                                <span class="range-value"><span id="logoSizeValue">100</span>px</span>
                            </div>
                            <input type="range" class="form-range" id="logoSize" min="50" max="200" step="10" value="100">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="preview-container">
                <div class="card">
                    <canvas id="canvas" width="1080" height="1080"></canvas>
                </div>
                <button class="btn-primary" onclick="downloadImage()" style="margin-top: 20px;">üì• Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú</button>
            </div>
        </div>
    </div>
    
    <div class="mobile-actions">
        <button class="btn-primary" onclick="downloadImage()">üì• Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú</button>
    </div>
    
    <script>
        // ÏÉâÏÉÅ ÌåîÎ†àÌä∏
        const backgrounds = [
            // Îã®ÏÉâ (4Í∞ú)
            { type: 'solid', color: '#9B7E6B', name: 'Î™®Ïπ¥ Î¨¥Ïä§' },
            { type: 'solid', color: '#F5EFE7', name: 'Ïï§Ìã∞ÌÅ¨ ÌôîÏù¥Ìä∏' },
            { type: 'solid', color: '#4A4845', name: 'Ï∞®ÏΩú ÎØ∏Ïä§Ìä∏' },
            { type: 'solid', color: '#B8AEA5', name: 'Ï°∞Ïö©Ìïú ÌöåÏÉâ' },
            
            // Í∑∏ÎùºÎç∞Ïù¥ÏÖò (2Í∞ú)
            { type: 'gradient', colors: ['#9B7E6B', '#E6DDD3'], name: 'Î™®Ïπ¥ ‚Üí ÌÅ¨Î¶º' },
            { type: 'gradient', colors: ['#D4C5B9', '#F8F5F0'], name: 'Î≤†Ïù¥ÏßÄ ‚Üí ÌôîÏù¥Ìä∏' },
        ];
        
        // ÌîåÎû´Ìèº Î°úÍ≥† URL (Ïó¨Í∏∞Ïóê Ïã§Ï†ú Ïù¥ÎØ∏ÏßÄ URLÏùÑ ÎÑ£ÏúºÏÑ∏Ïöî)
        const platformLogos = {
            bloom: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/bloom.jpg',
            carat: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/carat.png',
            caveDuck: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/Caveduck.jpg',  
    	   dokiChat: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/dokichat.jpg',
            inkChat: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/inkchat.jpg',
            zeta: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/zeta.jpg',
            luvDuv: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/LoveyDovey.jpg',
            melting: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/melting.jpg',
            pulse: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/pulse.jpg',
            ropanAI: 'https://raw.githubusercontent.com/yuliyulidaz/yulilog/refs/heads/logos/rofan.png'
        };
        
        let selectedBackground = -1;
        let logoImages = {};
        
        // Î°úÍ≥† Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨ Î°úÎìú
        function preloadLogos() {
            Object.keys(platformLogos).forEach(key => {
                const img = new Image();
                img.src = platformLogos[key];
                img.crossOrigin = 'anonymous';
                logoImages[key] = img;
            });
        }
        
        // Îã§ÌÅ¨Î™®Îìú ÌÜ†Í∏Ä
        function toggleDarkMode() {
            document.body.classList.toggle('dark');
            const btn = document.querySelector('.dark-mode-toggle');
            btn.textContent = document.body.classList.contains('dark') ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('darkMode', document.body.classList.contains('dark'));
        }
        
        // Îã§ÌÅ¨Î™®Îìú Ï¥àÍ∏∞Ìôî
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark');
            document.querySelector('.dark-mode-toggle').textContent = '‚òÄÔ∏è';
        }
        
        // Ïπ¥Îìú Ï†ëÍ∏∞/ÌéºÏπòÍ∏∞
        function toggleCard(header) {
            const card = header.parentElement;
            const content = card.querySelector('.card-content');
            card.classList.toggle('collapsed');
            content.classList.toggle('active');
        }
        
        // ÏÉâÏÉÅ ÌåîÎ†àÌä∏ ÏÉùÏÑ±
        const colorGrid = document.getElementById('colorGrid');
        backgrounds.forEach((bg, index) => {
            const div = document.createElement('div');
            div.className = 'color-option';
            
            if (bg.type === 'gradient') {
                div.style.background = `linear-gradient(135deg, ${bg.colors[0]}, ${bg.colors[1]})`;
            } else {
                div.style.background = bg.color;
            }
            
            div.title = bg.name;
            div.onclick = () => {
                document.querySelectorAll('.color-option').forEach(el => el.classList.remove('active'));
                div.classList.add('active');
                selectedBackground = index;
                updateCanvas();
            };
            
            colorGrid.appendChild(div);
        });
        
        // Ï∫îÎ≤ÑÏä§ ÏóÖÎç∞Ïù¥Ìä∏
        function updateCanvas() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            // Ï∫îÎ≤ÑÏä§ ÌÅ¨Í∏∞ Ï°∞Ï†ï
            const ratio = document.getElementById('canvasRatio').value;
            let width, height;
            switch(ratio) {
                case '1:1': width = 1080; height = 1080; break;
                case '4:5': width = 1080; height = 1350; break;
                case '16:9': width = 1920; height = 1080; break;
                case '9:16': width = 1080; height = 1920; break;
            }
            canvas.width = width;
            canvas.height = height;
            
            const quote = document.getElementById('quote').value;
            const author = document.getElementById('author').value;
            const title = document.getElementById('title').value;
            const font = document.getElementById('fontSelect').value;
            const align = document.querySelector('input[name="align"]:checked').value;
            const fontSize = parseInt(document.getElementById('fontSize').value);
            const lineHeightMultiplier = parseFloat(document.getElementById('lineHeight').value);
            const padding = parseInt(document.getElementById('padding').value);
            const textColor = document.getElementById('textColor').value;
            const linebreakMode = document.querySelector('input[name="linebreak"]').value;
            const platform = document.getElementById('platformSelect').value;
            const logoSize = parseInt(document.getElementById('logoSize').value);
            
            // Î∞∞Í≤Ω Í∑∏Î¶¨Í∏∞
            if (selectedBackground >= 0) {
                const bg = backgrounds[selectedBackground];
                if (bg.type === 'gradient') {
                    const gradient = ctx.createLinearGradient(0, 0, width, height);
                    gradient.addColorStop(0, bg.colors[0]);
                    gradient.addColorStop(1, bg.colors[1]);
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, width, height);
                } else {
                    ctx.fillStyle = bg.color;
                    ctx.fillRect(0, 0, width, height);
                }
            } else {
                const color1 = document.getElementById('gradientColor1').value;
                const color2 = document.getElementById('gradientColor2').value;
                
                if (color1 === color2) {
                    ctx.fillStyle = document.getElementById('solidColor').value;
                    ctx.fillRect(0, 0, width, height);
                } else {
                    const gradient = ctx.createLinearGradient(0, 0, width, height);
                    gradient.addColorStop(0, color1);
                    gradient.addColorStop(1, color2);
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, width, height);
                }
            }
            
            // ÌÖçÏä§Ìä∏ ÏÑ§Ï†ï
            const rgb = hexToRgb(textColor);
            ctx.fillStyle = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.95)`;
            
            let x;
            if (align === 'left' || align === 'justify') x = padding;
            else if (align === 'center') x = width / 2;
            else x = width - padding;
            
            // Î∞úÏ∑å Î¨∏Íµ¨ Í∑∏Î¶¨Í∏∞
            ctx.font = `600 ${fontSize}px "${font}"`;
            const maxWidth = width - (padding * 2);
            const lineHeight = fontSize * lineHeightMultiplier;
            let lines = [];
            
            const paragraphs = quote.split('\n');
            
            paragraphs.forEach(paragraph => {
                if (paragraph.trim() === '') {
                    lines.push('');
                    return;
                }
                
                if (linebreakMode === 'word') {
                    const words = paragraph.split(' ');
                    let currentLine = '';
                    
                    words.forEach(word => {
                        const testLine = currentLine + word + ' ';
                        const metrics = ctx.measureText(testLine);
                        if (metrics.width > maxWidth && currentLine !== '') {
                            lines.push(currentLine.trim());
                            currentLine = word + ' ';
                        } else {
                            currentLine = testLine;
                        }
                    });
                    if (currentLine.trim()) {
                        lines.push(currentLine.trim());
                    }
                } else {
                    let currentLine = '';
                    
                    for (let i = 0; i < paragraph.length; i++) {
                        const char = paragraph[i];
                        const testLine = currentLine + char;
                        const metrics = ctx.measureText(testLine);
                        
                        if (metrics.width > maxWidth && currentLine !== '') {
                            lines.push(currentLine);
                            currentLine = char;
                        } else {
                            currentLine = testLine;
                        }
                    }
                    if (currentLine) {
                        lines.push(currentLine);
                    }
                }
            });
            
            const totalHeight = lines.length * lineHeight;
            let y = (height - totalHeight) / 2 + fontSize;
            
            if (align === 'justify' && linebreakMode === 'word') {
                ctx.textAlign = 'left';
                lines.forEach((line, index) => {
                    if (line === '') {
                        y += lineHeight;
                        return;
                    }
                    if (index === lines.length - 1 || lines[index + 1] === '') {
                        ctx.fillText(line, padding, y);
                    } else {
                        drawJustifiedText(ctx, line, padding, y, maxWidth);
                    }
                    y += lineHeight;
                });
            } else {
                ctx.textAlign = align === 'justify' ? 'left' : align;
                let drawX = align === 'justify' ? padding : x;
                lines.forEach(line => {
                    if (line !== '') {
                        ctx.fillText(line, drawX, y);
                    }
                    y += lineHeight;
                });
            }
            
            // ÏûëÍ∞ÄÎ™ÖÍ≥º Ï†úÎ™©
            ctx.fillStyle = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.6)`;
            ctx.font = `400 35px "Nanum Gothic"`;
            ctx.textAlign = align === 'justify' ? 'left' : align;
            
            const bottomY = height - 130;
            let bottomX = align === 'justify' ? padding : x;
            if (author && title) {
                ctx.fillText(`‚Äî ${author}, „Ää${title}„Äã`, bottomX, bottomY);
            } else if (author) {
                ctx.fillText(`‚Äî ${author}`, bottomX, bottomY);
            } else if (title) {
                ctx.fillText(`„Ää${title}„Äã`, bottomX, bottomY);
            }
            
            // ÌîåÎû´Ìèº Î°úÍ≥† Í∑∏Î¶¨Í∏∞
            if (platform && logoImages[platform] && logoImages[platform].complete) {
                const logo = logoImages[platform];
                // Ï†àÎåÄ ÏúÑÏπò: Ïò§Î•∏Ï™ΩÏóêÏÑú 100px, ÌïòÎã®ÏóêÏÑú 100px
                const logoX = width - 100 - logoSize;
                const logoY = height - 100 - logoSize;
                
                // ÏõêÌòï ÌÅ¥Î¶¨Ìïë ÎßàÏä§ÌÅ¨ ÏÉùÏÑ±
                ctx.save();
                ctx.globalAlpha = 0.8;
                ctx.beginPath();
                ctx.arc(logoX + logoSize/2, logoY + logoSize/2, logoSize/2, 0, Math.PI * 2);
                ctx.closePath();
                ctx.clip();
                
                // Î°úÍ≥† Ïù¥ÎØ∏ÏßÄ Í∑∏Î¶¨Í∏∞
                ctx.drawImage(logo, logoX, logoY, logoSize, logoSize);
                ctx.restore();
            }
        }
        
        // ÏñëÏ™Ω Ï†ïÎ†¨ Ìï®Ïàò
        function drawJustifiedText(ctx, text, x, y, maxWidth) {
            const words = text.split(' ');
            if (words.length === 1) {
                ctx.fillText(text, x, y);
                return;
            }
            
            const totalWidth = ctx.measureText(text).width;
            const spaceWidth = (maxWidth - totalWidth + (words.length - 1) * ctx.measureText(' ').width) / (words.length - 1);
            
            let currentX = x;
            words.forEach((word) => {
                ctx.fillText(word, currentX, y);
                currentX += ctx.measureText(word).width + spaceWidth;
            });
        }
        
        // Hex to RGB Î≥ÄÌôò
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : { r: 255, g: 255, b: 255 };
        }
        
        // Îã§Ïö¥Î°úÎìú
        function downloadImage() {
            const canvas = document.getElementById('canvas');
            const link = document.createElement('a');
            link.download = 'quote_' + Date.now() + '.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        // Ïª§Ïä§ÌÖÄ ÏÉâÏÉÅ Î≥ÄÍ≤Ω Ïãú ÌåîÎ†àÌä∏ ÏÑ†ÌÉù Ìï¥Ï†ú
        document.getElementById('solidColor').addEventListener('input', () => {
            document.querySelectorAll('.color-option').forEach(el => el.classList.remove('active'));
            selectedBackground = -1;
            const solidColor = document.getElementById('solidColor').value;
            document.getElementById('gradientColor1').value = solidColor;
            document.getElementById('gradientColor2').value = solidColor;
            updateCanvas();
        });
        
        document.getElementById('gradientColor1').addEventListener('input', () => {
            document.querySelectorAll('.color-option').forEach(el => el.classList.remove('active'));
            selectedBackground = -1;
            updateCanvas();
        });
        
        document.getElementById('gradientColor2').addEventListener('input', () => {
            document.querySelectorAll('.color-option').forEach(el => el.classList.remove('active'));
            selectedBackground = -1;
            updateCanvas();
        });
        
        // ÌÖçÏä§Ìä∏ ÏÉâÏÉÅ Î≥ÄÍ≤Ω
        document.getElementById('textColor').addEventListener('input', (e) => {
            document.getElementById('textColorValue').textContent = e.target.value;
            updateCanvas();
        });
        
        // ÌîåÎû´Ìèº Î≥ÄÍ≤Ω Ïù¥Î≤§Ìä∏
        document.getElementById('platformSelect').addEventListener('change', updateCanvas);
        document.getElementById('logoSize').addEventListener('input', (e) => {
            document.getElementById('logoSizeValue').textContent = e.target.value;
            updateCanvas();
        });
        
        // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
        document.getElementById('quote').addEventListener('input', updateCanvas);
        document.getElementById('author').addEventListener('input', updateCanvas);
        document.getElementById('title').addEventListener('input', updateCanvas);
        document.getElementById('fontSelect').addEventListener('change', updateCanvas);
        document.getElementById('fontSize').addEventListener('input', (e) => {
            document.getElementById('fontSizeValue').textContent = e.target.value;
            updateCanvas();
        });
        document.getElementById('lineHeight').addEventListener('input', (e) => {
            document.getElementById('lineHeightValue').textContent = e.target.value;
            updateCanvas();
        });
        document.getElementById('padding').addEventListener('input', (e) => {
            document.getElementById('paddingValue').textContent = e.target.value;
            updateCanvas();
        });
        document.getElementById('canvasRatio').addEventListener('change', updateCanvas);
        document.querySelectorAll('input[name="align"]').forEach(radio => {
            radio.addEventListener('change', updateCanvas);
        });
        document.querySelectorAll('input[name="linebreak"]').forEach(radio => {
            radio.addEventListener('change', updateCanvas);
        });
        
        // Î°úÍ≥† ÎØ∏Î¶¨ Î°úÎìú Î∞è Ï¥àÍ∏∞ Î†åÎçîÎßÅ
        preloadLogos();
        updateCanvas();
    </script>
</body>
</html>
